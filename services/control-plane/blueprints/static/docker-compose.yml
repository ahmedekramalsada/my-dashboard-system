services:
  # ---------------------------------------------------------------------------
  # Static Storefront â€” Nginx only, no backend
  # ---------------------------------------------------------------------------
  storefront:
    image: nginx:alpine
    container_name: storefront-${TENANT_NAME}
    restart: unless-stopped
    volumes:
      - ./storefront.html:/usr/share/nginx/html/index.html:ro
      - ./storefront-nginx.conf:/etc/nginx/nginx.conf:ro
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.store-${TENANT_NAME}.rule=Host(`${TENANT_NAME}.${DOMAIN}`)"
      - "traefik.http.routers.store-${TENANT_NAME}.entrypoints=web"
      - "traefik.http.services.store-${TENANT_NAME}.loadbalancer.server.port=80"

# All tenant containers join the shared Traefik network
networks:
  default:
    name: traefik_default
    external: true
